"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const i=require("element-plus/es"),e=require("vue"),B=require("utils");const T=e.defineComponent({name:"cm-button"}),O=e.defineComponent({...T,props:{handler:null},setup(n){const a=n,t=e.ref(!1),s=B._debounce(async l=>{t.value=!0;try{await a.handler(l)}catch{}t.value=!1});return(l,u)=>{const o=i.ElButton;return e.openBlock(),e.createBlock(o,e.mergeProps(l.$attrs,{loading:e.unref(t),onClick:e.unref(s)}),{default:e.withCtx(()=>[e.renderSlot(l.$slots,"default",{},void 0,!0)]),_:3},16,["loading","onClick"])}}});const h=(n,a)=>{const t=n.__vccOpts||n;for(const[s,l]of a)t[s]=l;return t},v=h(O,[["__scopeId","data-v-68fd51f0"]]),w={install(n){n.component(v.name,v)}},I=Object.freeze(Object.defineProperty({__proto__:null,CmButton:v,default:w},Symbol.toStringTag,{value:"Module"}));const N=e.defineComponent({name:"CmInput"}),b=e.defineComponent({...N,props:{type:{default:"text"}},setup(n){const a=n;return(t,s)=>{const l=i.ElInput,u=i.ElInputNumber;return a.type!=="number"?(e.openBlock(),e.createBlock(l,e.mergeProps({key:0},t.$attrs,{type:a.type,clearable:""}),e.createSlots({_:2},[e.renderList(t.$slots,(o,r)=>({name:r,fn:e.withCtx(m=>[e.renderSlot(t.$slots,r,e.normalizeProps(e.guardReactiveProps(m)))])}))]),1040,["type"])):(e.openBlock(),e.createBlock(u,e.normalizeProps(e.mergeProps({key:1},t.$attrs)),null,16))}}}),z={install(n){n.component(b.name,b)}},j=Object.freeze(Object.defineProperty({__proto__:null,CmInput:b,default:z},Symbol.toStringTag,{value:"Module"}));const D=e.defineComponent({name:"CmSelect"}),C=e.defineComponent({...D,props:{type:{default:"normal"},getData:null,params:{default:""},multiple:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:a}){const t=n,s=e.ref([]),l=e.ref(!1),u=o=>{l.value=!0,t.getData(o).then(r=>{s.value=r}).finally(()=>{l.value=!1})};return u(t.params),e.watch(()=>t.params,()=>{a("update:modelValue",null),u(t.params)}),(o,r)=>{const m=i.ElOption,d=i.ElSelect,f=i.ElTreeSelect;return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createCommentVNode(" 普通下拉框 "),t.type==="normal"?(e.openBlock(),e.createBlock(d,e.mergeProps({key:0},o.$attrs,{multiple:t.multiple,"show-checkbox":!1,"onUpdate:modelValue":r[0]||(r[0]=c=>o.$emit("update:modelValue",c))}),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s),c=>(e.openBlock(),e.createBlock(m,{key:c.value,label:c.label,value:c.value},{default:e.withCtx(()=>[e.renderSlot(o.$slots,"default",{data:c})]),_:2},1032,["label","value"]))),128))]),_:3},16,["multiple"])):t.type==="tree"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createCommentVNode(" 树形下拉框 "),e.createVNode(f,e.mergeProps(o.$attrs,{data:e.unref(s),multiple:t.multiple,"show-checkbox":t.multiple,"onUpdate:modelValue":r[1]||(r[1]=c=>o.$emit("update:modelValue",c))}),{default:e.withCtx(({data:c})=>[e.renderSlot(o.$slots,"default",{data:c})]),_:3},16,["data","multiple","show-checkbox"])],2112)):e.createCommentVNode("v-if",!0)],2112)}}}),U={install(n){n.component(C.name,C)}},M=Object.freeze(Object.defineProperty({__proto__:null,CmSelect:C,default:U},Symbol.toStringTag,{value:"Module"})),L={"aria-hidden":"true",class:"svg-icon"},q=["xlink:href"],F=e.defineComponent({name:"CmSvg"}),G=e.defineComponent({...F,props:{prefix:{default:"icon"},name:null,widthScale:{default:1}},setup(n){const a=n;e.useCssVars(l=>({"88ae7cc6":e.unref(s)}));const t=e.computed(()=>`#${a.prefix}-${a.name}`),s=e.computed(()=>a.widthScale.toString()+"em");return(l,u)=>(e.openBlock(),e.createElementBlock("svg",L,[e.createElementVNode("use",{"xlink:href":e.unref(t)},null,8,q)]))}});const y=h(G,[["__scopeId","data-v-5865a63a"]]),R={install(n){n.component(y.name,y)}},W=Object.freeze(Object.defineProperty({__proto__:null,CmSvg:y,default:R},Symbol.toStringTag,{value:"Module"}));const A={class:"cm-table"},H={class:"buttons"},J={class:"table"},K={class:"pager"},Q=e.defineComponent({name:"CmTable"}),X=e.defineComponent({...Q,props:{getData:null,isInitData:{type:Boolean,default:!0},initParams:{default:()=>({})},isUsePager:{type:Boolean,default:!0},isUseCheckBox:{type:Boolean,default:!0}},setup(n,{expose:a}){const t=n,s=e.ref([]),l=e.ref(!1),u=e.ref({}),o=e.reactive({pageSize:20,currentPage:1}),r=e.ref(0),m=e.ref(null),d=(p,_=!0)=>(p&&(u.value=B._deepClone(p)),_&&(o.currentPage=1),t.isUsePager&&(u.value.pager=o),l.value=!0,t.getData(u).then(g=>{s.value=g.datas,r.value=g.total}).catch().finally(()=>{l.value=!1}));t.isInitData&&d(t.initParams),e.watch(()=>o.currentPage,()=>{d(null,!1)}),e.watch(()=>o.pageSize,()=>{d()});const f=e.ref([]),c=p=>{f.value=p},P=e.reactive({a:1});return a({update:d,selection:f,test:P}),(p,_)=>{const g=i.ElTableColumn,x=i.ElTable,V=i.ElPagination,E=i.ElLoadingDirective;return e.withDirectives((e.openBlock(),e.createElementBlock("div",A,[e.createCommentVNode(" 操作按钮组 "),e.createElementVNode("div",H,[e.renderSlot(p.$slots,"buttons",{selection:e.unref(f)},void 0,!0)]),e.createCommentVNode(" 表格主体 "),e.createElementVNode("div",J,[e.createVNode(x,e.mergeProps({ref_key:"table",ref:m},p.$attrs,{data:e.unref(s),onSelectionChange:c}),{default:e.withCtx(()=>[t.isUseCheckBox?(e.openBlock(),e.createBlock(g,{key:0,type:"selection"})):e.createCommentVNode("v-if",!0),e.renderSlot(p.$slots,"default",{},void 0,!0)]),_:3},16,["data"])]),e.createCommentVNode(" 分页部分 "),e.createElementVNode("div",K,[e.createVNode(V,{"page-size":e.unref(o).pageSize,"onUpdate:pageSize":_[0]||(_[0]=S=>e.unref(o).pageSize=S),"current-page":e.unref(o).currentPage,"onUpdate:currentPage":_[1]||(_[1]=S=>e.unref(o).currentPage=S),background:"",layout:"total, prev, pager, next","hide-on-single-page":"",total:e.unref(r)},null,8,["page-size","current-page","total"])])])),[[E,e.unref(l)]])}}});const k=h(X,[["__scopeId","data-v-175e1406"]]),Y={install(n){n.component(k.name,k)}},Z=Object.freeze(Object.defineProperty({__proto__:null,CmTable:k,default:Y},Symbol.toStringTag,{value:"Module"})),$=[],ee=Object.assign({"./CmButton/index.ts":I,"./CmInput/index.ts":j,"./CmSelect/index.ts":M,"./CmSvg/index.ts":W,"./CmTable/index.ts":Z}),te=async()=>{for(const n of Object.values(ee))$.push(n.default)};te();const ne={install(n){$.forEach(a=>{n.use(a)})}};exports.CmButton=v;exports.CmInput=b;exports.CmSelect=C;exports.CmSvg=y;exports.CmTable=k;exports.default=ne;
