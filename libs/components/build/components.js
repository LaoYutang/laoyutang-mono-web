"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const m=require("element-plus/es"),e=require("vue"),z=require("utils");const U=e.defineComponent({name:"cm-button"}),F=e.defineComponent({...U,props:{handler:null},setup(t){const o=t,n=e.ref(!1),s=z._debounce(async a=>{n.value=!0;try{await o.handler(a)}catch{}n.value=!1});return(a,c)=>{const l=m.ElButton;return e.openBlock(),e.createBlock(l,e.mergeProps(a.$attrs,{loading:e.unref(n),onClick:e.unref(s)}),{default:e.withCtx(()=>[e.renderSlot(a.$slots,"default",{},void 0,!0)]),_:3},16,["loading","onClick"])}}});const I=(t,o)=>{const n=t.__vccOpts||t;for(const[s,a]of o)n[s]=a;return n},h=I(F,[["__scopeId","data-v-68fd51f0"]]),M={install(t){t.component(h.name,h)}},Q=Object.freeze(Object.defineProperty({__proto__:null,CmButton:h,default:M},Symbol.toStringTag,{value:"Module"}));var E;const $=typeof window<"u",L=t=>typeof t<"u",R=t=>typeof t=="function";$&&((E=window==null?void 0:window.navigator)!=null&&E.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function q(t){return t}$&&window.document;$&&window.navigator;$&&window.location;function G(t){return JSON.parse(JSON.stringify(t))}const x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V="__vueuse_ssr_handlers__";x[V]=x[V]||{};x[V];var N;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(N||(N={}));var J=Object.defineProperty,T=Object.getOwnPropertySymbols,W=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,j=(t,o,n)=>o in t?J(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,H=(t,o)=>{for(var n in o||(o={}))W.call(o,n)&&j(t,n,o[n]);if(T)for(var n of T(o))A.call(o,n)&&j(t,n,o[n]);return t};const K={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};H({linear:q},K);function X(t,o,n,s={}){var a,c,l;const{clone:r=!1,passive:f=!1,eventName:i,deep:g=!1,defaultValue:u}=s,d=e.getCurrentInstance(),p=n||(d==null?void 0:d.emit)||((a=d==null?void 0:d.$emit)==null?void 0:a.bind(d))||((l=(c=d==null?void 0:d.proxy)==null?void 0:c.$emit)==null?void 0:l.bind(d==null?void 0:d.proxy));let _=i;o||(o="modelValue"),_=i||_||`update:${o.toString()}`;const C=v=>r?R(r)?r(v):G(v):v,S=()=>L(t[o])?C(t[o]):u;if(f){const v=S(),y=e.ref(v);return e.watch(()=>t[o],b=>y.value=C(b)),e.watch(y,b=>{(b!==t[o]||g)&&p(_,b)},{deep:g}),y}else return e.computed({get(){return S()},set(v){p(_,v)}})}const Y={class:"footer"},Z=e.defineComponent({name:"CmDialog"}),O=e.defineComponent({...Z,props:{modelValue:{type:Boolean},isShowButtons:{type:Boolean,default:!0},beforeconfrim:{type:Function,default:()=>Promise.reject()}},emits:["update:modelValue"],setup(t,{emit:o}){const n=t,s=X(n,"modelValue",o),a=()=>{n.beforeconfrim().then(()=>{s.value=!1}).catch(l=>l)},c=()=>{s.value=!1};return(l,r)=>{const f=h,i=m.ElDialog;return e.openBlock(),e.createBlock(i,e.mergeProps({modelValue:e.unref(s),"onUpdate:modelValue":r[0]||(r[0]=g=>e.isRef(s)?s.value=g:null)},l.$attrs,{class:"cm-dialog",draggable:"","close-on-click-modal":!1,"destroy-on-close":""}),e.createSlots({default:e.withCtx(()=>[e.renderSlot(l.$slots,"default")]),_:2},[t.isShowButtons?{name:"footer",fn:e.withCtx(()=>[e.createElementVNode("div",Y,[e.createVNode(f,{handler:c},{default:e.withCtx(()=>[e.createTextVNode("取消")]),_:1}),e.createVNode(f,{handler:a,type:"primary"},{default:e.withCtx(()=>[e.createTextVNode("提交")]),_:1})])]),key:"0"}:void 0]),1040,["modelValue"])}}}),ee={install(t){t.component(O.name,O)}},te=Object.freeze(Object.defineProperty({__proto__:null,CmDialog:O,default:ee},Symbol.toStringTag,{value:"Module"}));const ne=e.defineComponent({name:"CmInput"}),w=e.defineComponent({...ne,props:{type:{default:"text"}},setup(t){const o=t;return(n,s)=>{const a=m.ElInput,c=m.ElInputNumber;return o.type!=="number"?(e.openBlock(),e.createBlock(a,e.mergeProps({key:0},n.$attrs,{type:o.type,clearable:""}),e.createSlots({_:2},[e.renderList(n.$slots,(l,r)=>({name:r,fn:e.withCtx(f=>[e.renderSlot(n.$slots,r,e.normalizeProps(e.guardReactiveProps(f)))])}))]),1040,["type"])):(e.openBlock(),e.createBlock(c,e.normalizeProps(e.mergeProps({key:1},n.$attrs)),null,16))}}}),oe={install(t){t.component(w.name,w)}},le=Object.freeze(Object.defineProperty({__proto__:null,CmInput:w,default:oe},Symbol.toStringTag,{value:"Module"}));const ae=e.defineComponent({name:"CmSelect"}),B=e.defineComponent({...ae,props:{type:{default:"normal"},getData:null,params:{default:""},multiple:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(t,{emit:o}){const n=t,s=e.ref([]),a=e.ref(!1),c=l=>{a.value=!0,n.getData(l).then(r=>{s.value=r}).finally(()=>{a.value=!1})};return c(n.params),e.watch(()=>n.params,()=>{o("update:modelValue",null),c(n.params)}),(l,r)=>{const f=m.ElOption,i=m.ElSelect,g=m.ElTreeSelect;return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createCommentVNode(" 普通下拉框 "),n.type==="normal"?(e.openBlock(),e.createBlock(i,e.mergeProps({key:0},l.$attrs,{multiple:n.multiple,"show-checkbox":!1,"onUpdate:modelValue":r[0]||(r[0]=u=>l.$emit("update:modelValue",u))}),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(s),u=>(e.openBlock(),e.createBlock(f,{key:u.value,label:u.label,value:u.value},{default:e.withCtx(()=>[e.renderSlot(l.$slots,"default",{data:u})]),_:2},1032,["label","value"]))),128))]),_:3},16,["multiple"])):n.type==="tree"?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createCommentVNode(" 树形下拉框 "),e.createVNode(g,e.mergeProps(l.$attrs,{data:e.unref(s),multiple:n.multiple,"show-checkbox":n.multiple,"onUpdate:modelValue":r[1]||(r[1]=u=>l.$emit("update:modelValue",u))}),{default:e.withCtx(({data:u})=>[e.renderSlot(l.$slots,"default",{data:u})]),_:3},16,["data","multiple","show-checkbox"])],2112)):e.createCommentVNode("v-if",!0)],2112)}}}),se={install(t){t.component(B.name,B)}},re=Object.freeze(Object.defineProperty({__proto__:null,CmSelect:B,default:se},Symbol.toStringTag,{value:"Module"})),ce={"aria-hidden":"true",class:"svg-icon"},ue=["xlink:href"],ie=e.defineComponent({name:"CmSvg"}),de=e.defineComponent({...ie,props:{prefix:{default:"icon"},name:null,widthScale:{default:1}},setup(t){const o=t;e.useCssVars(a=>({"88ae7cc6":e.unref(s)}));const n=e.computed(()=>`#${o.prefix}-${o.name}`),s=e.computed(()=>o.widthScale.toString()+"em");return(a,c)=>(e.openBlock(),e.createElementBlock("svg",ce,[e.createElementVNode("use",{"xlink:href":e.unref(n)},null,8,ue)]))}});const P=I(de,[["__scopeId","data-v-5865a63a"]]),pe={install(t){t.component(P.name,P)}},_e=Object.freeze(Object.defineProperty({__proto__:null,CmSvg:P,default:pe},Symbol.toStringTag,{value:"Module"}));const me={class:"cm-table"},fe={class:"buttons"},ge={class:"table"},ve={class:"pager"},be=e.defineComponent({name:"CmTable"}),Ce=e.defineComponent({...be,props:{getData:null,isInitData:{type:Boolean,default:!0},initParams:{default:()=>({})},isUsePager:{type:Boolean,default:!0},isUseCheckBox:{type:Boolean,default:!0}},setup(t,{expose:o}){const n=t,s=e.ref([]),a=e.ref(!1),c=e.ref({}),l=e.reactive({pageSize:20,currentPage:1}),r=e.ref(0),f=e.ref(null),i=(p,_=!0)=>(p&&(c.value=z._deepClone(p)),_&&(l.currentPage=1),n.isUsePager&&(c.value.pager=l),a.value=!0,n.getData(c).then(C=>{s.value=C.datas,r.value=C.total}).catch().finally(()=>{a.value=!1}));n.isInitData&&i(n.initParams),e.watch(()=>l.currentPage,()=>{i(null,!1)}),e.watch(()=>l.pageSize,()=>{i()});const g=e.ref([]),u=p=>{g.value=p},d=e.reactive({a:1});return o({update:i,selection:g,test:d}),(p,_)=>{const C=m.ElTableColumn,S=m.ElTable,v=m.ElPagination,y=m.ElLoadingDirective;return e.withDirectives((e.openBlock(),e.createElementBlock("div",me,[e.createCommentVNode(" 操作按钮组 "),e.createElementVNode("div",fe,[e.renderSlot(p.$slots,"buttons",{selection:e.unref(g)},void 0,!0)]),e.createCommentVNode(" 表格主体 "),e.createElementVNode("div",ge,[e.createVNode(S,e.mergeProps({ref_key:"table",ref:f},p.$attrs,{data:e.unref(s),onSelectionChange:u}),{default:e.withCtx(()=>[n.isUseCheckBox?(e.openBlock(),e.createBlock(C,{key:0,type:"selection"})):e.createCommentVNode("v-if",!0),e.renderSlot(p.$slots,"default",{},void 0,!0)]),_:3},16,["data"])]),e.createCommentVNode(" 分页部分 "),e.createElementVNode("div",ve,[e.createVNode(v,{"page-size":e.unref(l).pageSize,"onUpdate:pageSize":_[0]||(_[0]=b=>e.unref(l).pageSize=b),"current-page":e.unref(l).currentPage,"onUpdate:currentPage":_[1]||(_[1]=b=>e.unref(l).currentPage=b),background:"",layout:"total, prev, pager, next","hide-on-single-page":"",total:e.unref(r)},null,8,["page-size","current-page","total"])])])),[[y,e.unref(a)]])}}});const k=I(Ce,[["__scopeId","data-v-175e1406"]]),ye={install(t){t.component(k.name,k)}},he=Object.freeze(Object.defineProperty({__proto__:null,CmTable:k,default:ye},Symbol.toStringTag,{value:"Module"})),D=[],Se=Object.assign({"./CmButton/index.ts":Q,"./CmDialog/index.ts":te,"./CmInput/index.ts":le,"./CmSelect/index.ts":re,"./CmSvg/index.ts":_e,"./CmTable/index.ts":he}),Oe=async()=>{for(const t of Object.values(Se))D.push(t.default)};Oe();const we={install(t){D.forEach(o=>{t.use(o)})}};exports.CmButton=h;exports.CmDialog=O;exports.CmInput=w;exports.CmSelect=B;exports.CmSvg=P;exports.CmTable=k;exports.default=we;
