"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const u=require("element-plus/es"),e=require("vue"),y=require("utils");const k={class:"cm-table"},T={class:"buttons"},B={class:"table"},N={class:"pager"},V=e.defineComponent({name:"CmTable"}),E=e.defineComponent({...V,props:{getData:null,isInitData:{type:Boolean,default:!0},initParams:{default:()=>({})},isUsePager:{type:Boolean,default:!0},isUseCheckBox:{type:Boolean,default:!0}},setup(a,{expose:d}){const t=a,r=e.ref([]),s=e.ref(!1),p=e.ref({}),n=e.reactive({pageSize:20,currentPage:1}),m=e.ref(0),v=e.ref(null),c=(o,l=!0)=>(o&&(p.value=y._deepClone(o)),l&&(n.currentPage=1),t.isUsePager&&(p.value.pager=n),s.value=!0,t.getData(p).then(i=>{r.value=i.datas,m.value=i.total}).catch().finally(()=>{s.value=!1}));t.isInitData&&c(t.initParams),e.watch(()=>n.currentPage,()=>{c(null,!1)}),e.watch(()=>n.pageSize,()=>{c()});const _=e.ref([]),b=o=>{_.value=o},C=e.reactive({a:1});return d({update:c,selection:_,test:C}),(o,l)=>{const i=u.ElTableColumn,P=u.ElTable,h=u.ElPagination,S=u.ElLoadingDirective;return e.withDirectives((e.openBlock(),e.createElementBlock("div",k,[e.createCommentVNode(" 操作按钮组 "),e.createElementVNode("div",T,[e.renderSlot(o.$slots,"buttons",{selection:e.unref(_)},void 0,!0)]),e.createCommentVNode(" 表格主体 "),e.createElementVNode("div",B,[e.createVNode(P,e.mergeProps({ref_key:"table",ref:v},o.$attrs,{data:e.unref(r),onSelectionChange:b}),{default:e.withCtx(()=>[t.isUseCheckBox?(e.openBlock(),e.createBlock(i,{key:0,type:"selection"})):e.createCommentVNode("v-if",!0),e.renderSlot(o.$slots,"default",{},void 0,!0)]),_:3},16,["data"])]),e.createCommentVNode(" 分页部分 "),e.createElementVNode("div",N,[e.createVNode(h,{"page-size":e.unref(n).pageSize,"onUpdate:pageSize":l[0]||(l[0]=g=>e.unref(n).pageSize=g),"current-page":e.unref(n).currentPage,"onUpdate:currentPage":l[1]||(l[1]=g=>e.unref(n).currentPage=g),background:"",layout:"total, prev, pager, next","hide-on-single-page":"",total:e.unref(m)},null,8,["page-size","current-page","total"])])])),[[S,e.unref(s)]])}}});const x=(a,d)=>{const t=a.__vccOpts||a;for(const[r,s]of d)t[r]=s;return t},f=x(E,[["__scopeId","data-v-175e1406"]]),z={install(a){a.component(f.name,f)}};exports.CmTable=f;exports.default=z;
