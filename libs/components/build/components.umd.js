(function(d,_){typeof exports=="object"&&typeof module<"u"?_(exports,require("element-plus/es"),require("vue")):typeof define=="function"&&define.amd?define(["exports","element-plus/es","vue"],_):(d=typeof globalThis<"u"?globalThis:d||self,_(d.components={},d.es,d.Vue))})(this,function(d,_,e){"use strict";const oe="",ae="",j=e.defineComponent({name:"cm-button"}),I=e.defineComponent({...j,props:{handler:null},setup(t){const n=t,o=e.ref(!1),i=async r=>{o.value=!0;try{await n.handler(r)}catch{}o.value=!1};return(r,l)=>{const c=_.ElButton;return e.openBlock(),e.createBlock(c,e.mergeProps(r.$attrs,{loading:e.unref(o),onClick:i}),{default:e.withCtx(()=>[e.renderSlot(r.$slots,"default",{},void 0,!0)]),_:3},16,["loading"])}}}),se="",$=(t,n)=>{const o=t.__vccOpts||t;for(const[i,r]of n)o[i]=r;return o},y=$(I,[["__scopeId","data-v-5e79745c"]]),N=Object.freeze(Object.defineProperty({__proto__:null,CmButton:y,default:{install(t){t.component(y.name,y)}}},Symbol.toStringTag,{value:"Module"})),ce="",le="",z=e.defineComponent({name:"CmInput"}),k=e.defineComponent({...z,props:{type:{default:"text"}},setup(t){const n=t;return(o,i)=>{const r=_.ElInput,l=_.ElInputNumber;return n.type!=="number"?(e.openBlock(),e.createBlock(r,e.mergeProps({key:0},o.$attrs,{type:n.type,clearable:""}),null,16,["type"])):(e.openBlock(),e.createBlock(l,e.normalizeProps(e.mergeProps({key:1},o.$attrs)),null,16))}}}),V=Object.freeze(Object.defineProperty({__proto__:null,CmInput:k,default:{install(t){t.component(k.name,k)}}},Symbol.toStringTag,{value:"Module"})),M={"aria-hidden":"true",class:"svg-icon"},D=["xlink:href"],U=e.defineComponent({name:"CmSvg"}),W=e.defineComponent({...U,props:{prefix:{default:"icon"},name:null,widthScale:{default:1}},setup(t){const n=t;e.useCssVars(r=>({"88ae7cc6":e.unref(i)}));const o=e.computed(()=>`#${n.prefix}-${n.name}`),i=e.computed(()=>n.widthScale.toString()+"em");return(r,l)=>(e.openBlock(),e.createElementBlock("svg",M,[e.createElementVNode("use",{"xlink:href":e.unref(o)},null,8,D)]))}}),pe="",C=$(W,[["__scopeId","data-v-5865a63a"]]),A=Object.freeze(Object.defineProperty({__proto__:null,CmSvg:C,default:{install(t){t.component(C.name,C)}}},Symbol.toStringTag,{value:"Module"})),_e="",ue="",fe="",me="",ge="",be="",he="",ye="",ke="",Ce="",Se="",xe="",P=t=>Object.prototype.toString.call(t).slice(8,-1),w=t=>["String","Number","Boolean","Null","Undefined","Symbol","Bigint"].includes(P(t));var T=(t,n,o)=>{if(!n.has(t))throw TypeError("Cannot "+o)},B=(t,n,o)=>(T(t,n,"read from private field"),o?o.call(t):n.get(t)),q=(t,n,o)=>{if(n.has(t))throw TypeError("Cannot add the same private member more than once");n instanceof WeakSet?n.add(t):n.set(t,o)},L=(t,n,o,i)=>(T(t,n,"write to private field"),i?i.call(t,o):n.set(t,o),o),b;class R{constructor(...n){q(this,b,void 0),L(this,b,new Array(...n))}push(n){return B(this,b).push(n)}pop(){return B(this,b).pop()}length(){return B(this,b).length}}b=new WeakMap;const F=t=>{if(w(t))return t;let n;const o=new R({parent:n,key:void 0,data:t,sign:2}),i=new Map,r=(l,c,a,p)=>{switch(p){case 2:{n=a;break}case 3:{l[c]=a;break}case 0:{l.add(a);break}case 1:{l.set(c,a);break}}};for(;o.length()>0;){const{parent:l,key:c,data:a,sign:p}=o.pop();if(w(a)){r(l,c,a,p);continue}if(i.has(a)){r(l,c,i.get(a),p);continue}const g=P(a);switch(g){case"Date":{const s=new Date(a);r(l,c,s,p),i.set(a,s);break}case"RegExp":{const s=new RegExp(a.source,a.flags);r(l,c,s,p),i.set(a,s);break}case"Function":{r(l,c,a,p);break}case"Array":{const s=[];r(l,c,s,p),i.set(a,s),a.forEach((u,f)=>{o.push({parent:s,key:f,data:u,sign:3})});break}case"Object":{const s={};r(l,c,s,p),i.set(a,s),Object.entries(a).reverse().forEach(([u,f])=>{o.push({parent:s,key:u,data:f,sign:3})});break}case"Set":case"WeakSet":{const s=new a.constructor;r(l,c,s,p),i.set(a,s),Array.from(a).reverse().forEach((u,f)=>{o.push({parent:s,key:f,data:u,sign:0})});break}case"Map":case"WeakMap":{const s=new a.constructor;r(l,c,s,p),i.set(a,s),Array.from(a).reverse().forEach(([u,f])=>{o.push({parent:s,key:u,data:f,sign:1})});break}default:console.error(`[typeError] unknown type ${g}`)}}return n},G={class:"cm-table"},H={class:"buttons"},J={class:"table"},K={class:"pager"},Q=e.defineComponent({name:"CmTable"}),X=e.defineComponent({...Q,props:{getData:null,isInitData:{type:Boolean,default:!0},initParams:{default:()=>({})},isUsePager:{type:Boolean,default:!0},isUseCheckBox:{type:Boolean,default:!0}},setup(t,{expose:n}){const o=t,i=e.ref([]),r=e.ref(!1),l=e.ref({}),c=e.reactive({pageSize:20,currentPage:1}),a=e.ref(0),p=e.ref(null),g=(m,h=!0)=>(m&&(l.value=F(m)),h&&(c.currentPage=1),o.isUsePager&&(l.value.pager=c),r.value=!0,o.getData(l).then(x=>{i.value=x.datas,a.value=x.total}).catch().finally(()=>{r.value=!1}));o.isInitData&&g(o.initParams),e.watch(()=>c.currentPage,()=>{g(null,!1)}),e.watch(()=>c.pageSize,()=>{g()});const s=e.ref([]),u=m=>{s.value=m},f=e.reactive({a:1});return n({update:g,selection:s,test:f}),(m,h)=>{const x=_.ElTableColumn,ee=_.ElTable,te=_.ElPagination,ne=_.ElLoadingDirective;return e.withDirectives((e.openBlock(),e.createElementBlock("div",G,[e.createCommentVNode(" 操作按钮组 "),e.createElementVNode("div",H,[e.renderSlot(m.$slots,"buttons",{selection:e.unref(s)},void 0,!0)]),e.createCommentVNode(" 表格主体 "),e.createElementVNode("div",J,[e.createVNode(ee,e.mergeProps({ref_key:"table",ref:p},m.$attrs,{data:e.unref(i),onSelectionChange:u}),{default:e.withCtx(()=>[o.isUseCheckBox?(e.openBlock(),e.createBlock(x,{key:0,type:"selection"})):e.createCommentVNode("v-if",!0),e.renderSlot(m.$slots,"default",{},void 0,!0)]),_:3},16,["data"])]),e.createCommentVNode(" 分页部分 "),e.createElementVNode("div",K,[e.createVNode(te,{"page-size":e.unref(c).pageSize,"onUpdate:pageSize":h[0]||(h[0]=E=>e.unref(c).pageSize=E),"current-page":e.unref(c).currentPage,"onUpdate:currentPage":h[1]||(h[1]=E=>e.unref(c).currentPage=E),background:"",layout:"total, prev, pager, next","hide-on-single-page":"",total:e.unref(a)},null,8,["page-size","current-page","total"])])])),[[ne,e.unref(r)]])}}}),$e="",S=$(X,[["__scopeId","data-v-175e1406"]]),Y=Object.freeze(Object.defineProperty({__proto__:null,CmTable:S,default:{install(t){t.component(S.name,S)}}},Symbol.toStringTag,{value:"Module"})),O=[],Z=Object.assign({"./CmButton/index.ts":N,"./CmInput/index.ts":V,"./CmSvg/index.ts":A,"./CmTable/index.ts":Y});(async()=>{for(const t of Object.values(Z))O.push(t.default)})();const v={install(t){O.forEach(n=>{t.use(n)})}};d.CmButton=y,d.CmInput=k,d.CmSvg=C,d.CmTable=S,d.default=v,Object.defineProperties(d,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
