"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const h=require("element-plus/es"),e=require("vue"),X=require("echarts/core"),y=require("echarts/charts"),f=require("echarts/components"),V=require("echarts/features"),Y=require("echarts/renderers"),E=require("utils");function ee(t){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const o in t)if(o!=="default"){const r=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(n,o,r.get?r:{enumerable:!0,get:()=>t[o]})}}return n.default=t,Object.freeze(n)}const D=ee(X);D.use([f.TitleComponent,f.TooltipComponent,f.GridComponent,f.DatasetComponent,f.TransformComponent,f.LegendComponent,f.ToolboxComponent,y.BarChart,y.LineChart,y.PieChart,V.LabelLayout,V.UniversalTransition,Y.CanvasRenderer]);const te=D;var N;const C=typeof window<"u",B=()=>{};C&&((N=window==null?void 0:window.navigator)!=null&&N.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ne(t){return typeof t=="function"?t():e.unref(t)}function oe(t){return t}function M(t){return e.getCurrentScope()?(e.onScopeDispose(t),!0):!1}function re(t,n=!0){e.getCurrentInstance()?e.onMounted(t):n?t():e.nextTick(t)}function v(t){var n;const o=ne(t);return(n=o==null?void 0:o.$el)!=null?n:o}const I=C?window:void 0;C&&window.document;C&&window.navigator;C&&window.location;function q(t,n=!1){const o=e.ref(),r=()=>o.value=Boolean(t());return r(),re(r,n),o}const O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},x="__vueuse_ssr_handlers__";O[x]=O[x]||{};O[x];var $=Object.getOwnPropertySymbols,ae=Object.prototype.hasOwnProperty,ce=Object.prototype.propertyIsEnumerable,se=(t,n)=>{var o={};for(var r in t)ae.call(t,r)&&n.indexOf(r)<0&&(o[r]=t[r]);if(t!=null&&$)for(var r of $(t))n.indexOf(r)<0&&ce.call(t,r)&&(o[r]=t[r]);return o};function L(t,n,o={}){const r=o,{window:c=I}=r,i=se(r,["window"]);let s;const d=q(()=>c&&"ResizeObserver"in c),a=()=>{s&&(s.disconnect(),s=void 0)},l=e.watch(()=>v(t),p=>{a(),d.value&&c&&p&&(s=new ResizeObserver(n),s.observe(p,i))},{immediate:!0,flush:"post"}),u=()=>{a(),l()};return M(u),{isSupported:d,stop:u}}function le(t,n={width:0,height:0},o={}){const{window:r=I,box:c="content-box"}=o,i=e.computed(()=>{var a,l;return(l=(a=v(t))==null?void 0:a.namespaceURI)==null?void 0:l.includes("svg")}),s=e.ref(n.width),d=e.ref(n.height);return L(t,([a])=>{const l=c==="border-box"?a.borderBoxSize:c==="content-box"?a.contentBoxSize:a.devicePixelContentBoxSize;if(r&&i.value){const u=v(t);if(u){const p=r.getComputedStyle(u);s.value=parseFloat(p.width),d.value=parseFloat(p.height)}}else if(l){const u=Array.isArray(l)?l:[l];s.value=u.reduce((p,{inlineSize:m})=>p+m,0),d.value=u.reduce((p,{blockSize:m})=>p+m,0)}else s.value=a.contentRect.width,d.value=a.contentRect.height},o),e.watch(()=>v(t),a=>{s.value=a?n.width:0,d.value=a?n.height:0}),{width:s,height:d}}function ie(t,n,o={}){const{root:r,rootMargin:c="0px",threshold:i=.1,window:s=I}=o,d=q(()=>s&&"IntersectionObserver"in s);let a=B;const l=d.value?e.watch(()=>({el:v(t),root:v(r)}),({el:p,root:m})=>{if(a(),!p)return;const _=new IntersectionObserver(n,{root:m,rootMargin:c,threshold:i});_.observe(p),a=()=>{_.disconnect(),a=B}},{immediate:!0,flush:"post"}):B,u=()=>{a(),l()};return M(u),{isSupported:d,stop:u}}var T;(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(T||(T={}));var ue=Object.defineProperty,S=Object.getOwnPropertySymbols,de=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,z=(t,n,o)=>n in t?ue(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,_e=(t,n)=>{for(var o in n||(n={}))de.call(n,o)&&z(t,o,n[o]);if(S)for(var o of S(n))pe.call(n,o)&&z(t,o,n[o]);return t};const he={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};_e({linear:oe},he);const me=e.defineComponent({name:"CmChart"}),fe=e.defineComponent({...me,props:{options:null},setup(t,{expose:n}){const o=t,r=e.ref(null);let c=null,i;const{height:s,width:d}=le(r),a=e.ref(null),{stop:l}=ie(r,([{isIntersecting:u}])=>{u&&(c=te.init(a.value),i=E._throttle(c.resize,500,!1),L(r,()=>i()),c.setOption(o.options),l())});return e.onBeforeUnmount(()=>{c.dispose()}),n({chartInstance:c}),(u,p)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"cmChart",ref:r,class:"cm-chart"},[e.createElementVNode("div",{id:"chart",ref_key:"chart",ref:a,class:"chart",style:e.normalizeStyle(`width: ${e.unref(d)}px;height: ${e.unref(s)}px;`)},null,4)],512))}});const ve=e.defineComponent({name:"cm-button"}),ge=e.defineComponent({...ve,props:{handler:null},setup(t){const n=t,o=e.ref(!1),r=E._debounce(async c=>{o.value=!0;try{await n.handler(c)}catch{}o.value=!1});return(c,i)=>{const s=h.ElButton;return e.openBlock(),e.createBlock(s,e.mergeProps(c.$attrs,{loading:e.unref(o),onClick:e.unref(r)}),{default:e.withCtx(()=>[e.renderSlot(c.$slots,"default",{},void 0,!0)]),_:3},16,["loading","onClick"])}}});const j=(t,n)=>{const o=t.__vccOpts||t;for(const[r,c]of n)o[r]=c;return o},Ce=j(ge,[["__scopeId","data-v-68fd51f0"]]),we={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},be=e.createElementVNode("path",{fill:"currentColor",d:"M12 20q-3.35 0-5.675-2.325T4 12q0-3.35 2.325-5.675T12 4q1.725 0 3.3.712T18 6.75V4h2v7h-7V9h4.2q-.8-1.4-2.188-2.2T12 6Q9.5 6 7.75 7.75T6 12q0 2.5 1.75 4.25T12 18q1.925 0 3.475-1.1T17.65 14h2.1q-.7 2.65-2.85 4.325T12 20Z"},null,-1),ye=[be];function Be(t,n){return e.openBlock(),e.createElementBlock("svg",we,ye)}const Oe={name:"material-symbols-refresh",render:Be};const xe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ke=e.createElementVNode("path",{fill:"currentColor",d:"M4 20V9h4v11Zm6 0V4h4v16Zm6 0v-7h4v7Z"},null,-1),Ee=[ke];function Ie(t,n){return e.openBlock(),e.createElementBlock("svg",xe,Ee)}const Ve={name:"material-symbols-bar-chart-sharp",render:Ie},Ne={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},$e=e.createElementVNode("path",{fill:"currentColor",d:"m3.5 18.5l6-6l4 4L22 6.92L20.59 5.5l-7.09 8l-4-4L2 17l1.5 1.5Z"},null,-1),Te=[$e];function Se(t,n){return e.openBlock(),e.createElementBlock("svg",Ne,Te)}const ze={name:"mdi-chart-line-variant",render:Se},Pe={viewBox:"0 0 1024 1024",width:"1.2em",height:"1.2em"},De=e.createElementVNode("path",{fill:"currentColor",d:"M448 68.48v64.832A384.128 384.128 0 0 0 512 896a384.128 384.128 0 0 0 378.688-320h64.768A448.128 448.128 0 0 1 64 512A448.128 448.128 0 0 1 448 68.48z"},null,-1),Me=e.createElementVNode("path",{fill:"currentColor",d:"M576 97.28V448h350.72A384.064 384.064 0 0 0 576 97.28zM512 64V33.152A448 448 0 0 1 990.848 512H512V64z"},null,-1),qe=[De,Me];function Le(t,n){return e.openBlock(),e.createElementBlock("svg",Pe,qe)}const je={name:"ep-pie-chart",render:Le},He={viewBox:"0 0 16 16",width:"1.2em",height:"1.2em"},Qe=e.createElementVNode("path",{fill:"currentColor",d:"M1 2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V2zM1 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V7zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V7zM1 12a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-2zm5 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2z"},null,-1),Re=[Qe];function Ae(t,n){return e.openBlock(),e.createElementBlock("svg",He,Re)}const Fe={name:"bi-grid-3x3-gap-fill",render:Ae},Ge={legend:{bottom:0,type:"scroll"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{top:30,right:70,bottom:70,left:70}},P={bar:Ve,line:ze,pie:je,grid:Fe},Ue={class:"header"},We={class:"header-left"},Ze={class:"header-left-title"},Ke={class:"header-left-dropdown"},Je={class:"header-right"},Xe=e.defineComponent({name:"CmChartCard"}),Ye=e.defineComponent({...Xe,props:{name:null,title:null,configs:null,getData:null,publicConfig:{default:void 0},height:{default:400},isInitData:{type:Boolean,default:!0}},setup(t){const n=t,o=e.ref(null),r=()=>{var _,b;(b=(_=o.value)==null?void 0:_.chartInstance)==null||b.update()},c=e.ref(!1),i=e.ref([]),s=()=>(c.value=!0,n.getData().then(_=>{i.value=_??[],r()}).finally(()=>{c.value=!1}));e.onMounted(()=>{n.isInitData&&s()});const d=e.computed(()=>i.value.length<=1),a=e.computed(()=>[...n.configs.map(({type:_})=>_),"grid"]),l=e.ref(0),u=e.computed(()=>P[a.value[l.value]]),p=e.computed(()=>Object.assign(E._deepClone(Ge),n.publicConfig,n.configs[l.value]?n.configs[l.value].config:{},{dataset:{source:i.value}})),m=_=>{l.value=_,e.nextTick(()=>{r()})};return(_,b)=>{const H=h.ElDropdownItem,Q=h.ElDropdownMenu,R=h.ElDropdown,A=Oe,F=Ce,G=h.ElEmpty,U=fe,W=h.ElTableColumn,Z=h.ElTable,K=h.ElCard,J=h.ElLoadingDirective;return e.withDirectives((e.openBlock(),e.createBlock(K,{class:"cm-chart-card"},{header:e.withCtx(()=>[e.createElementVNode("div",Ue,[e.createElementVNode("div",We,[e.createCommentVNode(" 标题 "),e.createElementVNode("div",Ze,e.toDisplayString(n.title),1),e.createCommentVNode(" 类型选择下拉 "),e.createElementVNode("div",Ke,[e.createVNode(R,{trigger:"click",onCommand:m},{dropdown:e.withCtx(()=>[e.createVNode(Q,null,{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),(g,w)=>(e.openBlock(),e.createBlock(H,{key:g,command:w,disabled:w===e.unref(l)},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(P)[g]),{style:{"font-size":"18px"}}))]),_:2},1032,["command","disabled"]))),128))]),_:1})]),default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(u)),{class:"icon"}))]),_:1})])]),e.createCommentVNode(" 右侧操作区 "),e.createElementVNode("div",Je,[e.createVNode(F,{text:"",circle:"",handler:s},{default:e.withCtx(()=>[e.createVNode(A)]),_:1})])])]),default:e.withCtx(()=>[e.createCommentVNode(" 卡片主体 "),e.createElementVNode("div",{class:"card-body",style:e.normalizeStyle(`height: ${n.height}px`)},[e.createCommentVNode(" 空 "),e.unref(d)?(e.openBlock(),e.createBlock(G,{key:0,description:"No Data"})):e.unref(l)<e.unref(a).length-1?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createCommentVNode(" 图表 "),e.createVNode(U,{ref_key:"refChart",ref:o,options:e.unref(p),style:e.normalizeStyle(`height: ${n.height}px`)},null,8,["options","style"])],2112)):(e.openBlock(),e.createElementBlock(e.Fragment,{key:2},[e.createCommentVNode(" 表格 "),e.createVNode(Z,{data:e.unref(i).slice(1)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i)[0],(g,w)=>(e.openBlock(),e.createBlock(W,{key:g,prop:w.toString(),label:g},null,8,["prop","label"]))),128))]),_:1},8,["data"])],2112))],4)]),_:1})),[[J,e.unref(c)]])}}});const k=j(Ye,[["__scopeId","data-v-23977528"]]),et={install(t){t.component(k.name,k)}};exports.CmChartCard=k;exports.default=et;
